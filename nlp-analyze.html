<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RE:PROMPT | KINETIC NEURAL ENGINE</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700;900&family=Syne:wght@400;700;800&family=Outfit:wght@900&display=swap"
    rel="stylesheet">

  <style>
    :root {
      --bg: #000000;
      --fg: #F4F4F4;
      --accent: #FF3D00;
      --accent-green: #39FF14;
      --accent-yellow: #FFE600;
      --accent-blue: #0047FF;
      --accent-pink: #FF00E5;

      --border: 4px solid var(--fg);
      --border-thin: 2px solid var(--fg);
      --shadow: 10px 10px 0px rgba(255, 255, 255, 0.05);

      /* Kinetic Animation Transitions */
      --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
      --ease-in-out-back: cubic-bezier(0.68, -0.6, 0.32, 1.6);
      --transition-smooth: all 0.6s var(--ease-out-expo);
      --transition-snappy: all 0.3s var(--ease-out-expo);
    }

    /* ── Base ────────────────────────────────────────────────────────── */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      cursor: none;
      /* Custom cursor implementation below */
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background: var(--bg);
      color: var(--fg);
      font-family: 'Space Grotesk', sans-serif;
      overflow-x: hidden;
      line-height: 1.1;
      word-break: break-word;
    }

    /* Custom Cursor */
    #cursor {
      width: 20px;
      height: 20px;
      background: var(--accent-green);
      border-radius: 50%;
      position: fixed;
      pointer-events: none;
      z-index: 10000;
      mix-blend-mode: difference;
      transition: transform 0.1s var(--ease-out-expo);
    }

    #cursor-follower {
      width: 40px;
      height: 40px;
      border: 2px solid var(--fg);
      border-radius: 50%;
      position: fixed;
      pointer-events: none;
      z-index: 9999;
      transition: all 0.3s var(--ease-out-expo);
    }

    /* Texture layer */
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3 RIGHT%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.5' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      opacity: 0.04;
      pointer-events: none;
      z-index: 9998;
      filter: invert(1);
    }

    /* ── Kinetic Components ───────────────────────────────────────────── */
    .magnetic-wrap {
      display: inline-block;
      transition: transform 0.3s var(--ease-out-expo);
    }

    /* ── Intro Manifesto ───────────────────────────────────────────── */
    #manifesto {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 80px 40px;
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
    }

    .manifesto-badge {
      font-family: 'Syne', sans-serif;
      font-weight: 800;
      text-transform: uppercase;
      font-size: 14px;
      color: var(--accent-yellow);
      border: var(--border-thin);
      padding: 8px 16px;
      display: inline-block;
      margin-bottom: 40px;
      transform: rotate(-2deg);
      transition: var(--transition-snappy);
    }

    .manifesto-badge:hover {
      transform: rotate(0deg) scale(1.1);
      background: var(--fg);
      color: var(--bg);
    }

    .manifesto-title {
      font-family: 'Outfit', sans-serif;
      font-size: clamp(3rem, 10vw, 9rem);
      line-height: 0.8;
      text-transform: uppercase;
      margin-bottom: 60px;
      letter-spacing: -0.05em;
    }

    .manifesto-title span {
      display: inline-block;
      transition: transform 0.5s var(--ease-out-expo);
    }

    .manifesto-title:hover span {
      transform: skewX(-15deg) translateY(-10px);
      color: var(--accent-green);
    }

    .manifesto-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 40px;
      margin-top: 60px;
    }

    .manifesto-card {
      border-left: var(--border);
      padding: 30px;
      transition: var(--transition-smooth);
      background: transparent;
    }

    .manifesto-card:hover {
      background: rgba(255, 255, 255, 0.05);
      padding-left: 50px;
      border-left-width: 15px;
      border-left-color: var(--accent-pink);
    }

    .manifesto-card h3 {
      font-family: 'Syne', sans-serif;
      font-size: 32px;
      text-transform: uppercase;
      margin-bottom: 15px;
      color: var(--accent-green);
      transition: var(--transition-snappy);
    }

    .manifesto-card:hover h3 {
      color: var(--fg);
      transform: scale(1.05);
    }

    .manifesto-card p {
      font-size: 18px;
      font-weight: 500;
      opacity: 0.6;
      line-height: 1.4;
    }

    /* ── Neural Engine Layout ────────────────────────────────────────── */
    .poster-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 100px 40px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 60px;
      min-height: 100vh;
      border-top: var(--border);
    }

    @media (max-width: 1024px) {
      .poster-container {
        grid-template-columns: 1fr;
        padding: 60px 20px;
      }
    }

    /* ── Title Typography ────────────────────────────────────── */
    .hero-title {
      font-family: 'Syne', sans-serif;
      font-weight: 800;
      font-size: clamp(2.5rem, 8vw, 6rem);
      text-transform: uppercase;
      letter-spacing: -0.04em;
      line-height: 0.9;
      margin-bottom: 30px;
      perspective: 1000px;
    }

    .hero-title .highlight {
      color: var(--fg);
      display: block;
      transition: var(--transition-smooth);
    }

    .hero-title:hover span {
      transform: translateZ(50px) scale(1.05);
      color: var(--accent-green);
    }

    .hero-title:hover .highlight {
      color: var(--accent-yellow);
    }

    /* ── Inputs ──────────────────────────────────────────────────────── */
    textarea {
      width: 100%;
      background: rgba(255, 255, 255, 0.02);
      border: var(--border-thin);
      padding: 30px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 24px;
      font-weight: 700;
      color: var(--fg);
      resize: none;
      min-height: 400px;
      outline: none;
      transition: var(--transition-smooth);
    }

    textarea:focus {
      background: rgba(255, 255, 255, 0.05);
      border-color: var(--accent-yellow);
      box-shadow: 20px 20px 0px rgba(57, 255, 20, 0.1);
      transform: scale(1.02);
    }

    /* ── Action Buttons ──────────────────────────────────────────────── */
    .action-button {
      background: var(--fg);
      color: var(--bg);
      border: none;
      padding: 25px 50px;
      font-family: 'Outfit', sans-serif;
      font-size: 20px;
      font-weight: 900;
      text-transform: uppercase;
      box-shadow: 10px 10px 0px var(--accent-pink);
      display: inline-flex;
      align-items: center;
      gap: 15px;
      transition: var(--transition-smooth);
      margin-top: 30px;
      position: relative;
      overflow: hidden;
    }

    .action-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--accent-green);
      transition: var(--transition-smooth);
      z-index: -1;
    }

    .action-button:hover {
      color: var(--bg);
      box-shadow: 15px 15px 0px var(--fg);
      transform: translate(-5px, -5px);
    }

    .action-button:hover::before {
      left: 0;
    }

    .action-button:disabled {
      opacity: 0.2;
      cursor: not-allowed;
      transform: none !important;
      box-shadow: none !important;
    }

    /* ── Steps ───────────────────────────────────────────────────────── */
    .step-view {
      display: none;
      opacity: 0;
      transform: translateY(40px);
      transition: var(--transition-smooth);
    }

    .step-view.active {
      display: grid;
      opacity: 1;
      transform: translateY(0);
    }

    /* ── Question Cards ──────────────────────────────────────────────── */
    .question-zine {
      border: var(--border-thin);
      padding: 30px;
      background: #080808;
      margin-bottom: 30px;
      transition: var(--transition-smooth);
      position: relative;
    }

    .question-zine:hover {
      transform: rotate(1deg) scale(1.03) translate(5px, -5px);
      border-color: var(--accent-blue);
      box-shadow: -10px 10px 0px var(--accent-pink);
    }

    /* ── Results ─────────────────────────────────────────────────────── */
    .master-prompt {
      font-size: 1.25rem;
      font-weight: 700;
      border: var(--border);
      padding: 40px;
      background: #000;
      color: var(--accent-yellow);
      box-shadow: 20px 20px 0px rgba(0, 71, 255, 0.2);
      white-space: pre-wrap;
      margin-bottom: 80px;
      transition: var(--transition-smooth);
    }

    .master-prompt:hover {
      transform: scale(1.02);
      box-shadow: 25px 25px 0px var(--accent-green);
    }

    .platform-poster {
      border-top: var(--border-thin);
      padding: 40px 0;
      transition: var(--transition-smooth);
    }

    .platform-poster:hover {
      border-top-color: var(--accent-pink);
      background: rgba(255, 255, 255, 0.02);
      padding-left: 20px;
    }

    .platform-title {
      font-family: 'Outfit', sans-serif;
      font-size: 50px;
      text-transform: uppercase;
      color: var(--accent-green);
      margin-bottom: 15px;
      transition: var(--transition-snappy);
    }

    .platform-poster:hover .platform-title {
      color: var(--accent-pink);
      letter-spacing: 0.1em;
    }

    .platform-copy {
      background: var(--fg);
      color: var(--bg);
      padding: 10px 20px;
      font-weight: 900;
      text-transform: uppercase;
      border: none;
      margin-top: 20px;
      transition: var(--transition-snappy);
    }

    .platform-copy:hover {
      background: var(--accent-yellow);
      transform: translateY(-5px) skewX(-10deg);
      box-shadow: 5px 5px 0px var(--fg);
    }

    /* ── Loader ──────────────────────────────────────────────────────── */
    #loader {
      position: fixed;
      inset: 0;
      background: var(--bg);
      color: var(--fg);
      z-index: 10000;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .loader-text {
      font-family: 'Outfit', sans-serif;
      font-size: 8vw;
      text-transform: uppercase;
      animation: jitter 0.1s infinite;
    }

    @keyframes jitter {
      0% {
        transform: translate(2px, 2px);
      }

      50% {
        transform: translate(-2px, -2px);
      }

      100% {
        transform: translate(0, 0);
      }
    }

    /* ── Reveal ──────────────────────────────────────────────────────── */
    .reveal {
      opacity: 0;
      transform: translateY(30px);
      transition: all 1s var(--ease-out-expo);
    }

    .reveal.visible {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>

<body>

  <!-- CUSTOM CURSOR -->
  <div id="cursor"></div>
  <div id="cursor-follower"></div>

  <style>
    /* Typography Overrides to prevent word splits and center layout */
    body {
      word-break: normal !important;
      overflow-wrap: anywhere !important;
    }

    .hero-title,
    .manifesto-title {
      word-break: normal !important;
      overflow-wrap: normal !important;
      text-align: center;
    }

    .hero-title span,
    .manifesto-title span {
      display: inline-block;
      white-space: nowrap;
      transition: var(--transition-smooth);
    }

    .manifesto-title:hover span {
      transform: skewX(-5deg) translateY(-5px) scale(1.02);
    }

    .manifesto-title {
      font-size: clamp(2rem, 12vw, 8rem) !important;
      position: relative;
      width: 100%;
      max-width: 100vw;
      margin: 0 auto;
    }

    /* Merged Percentage Style */
    .merged-pct {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-right: 0.1em;
    }

    .merged-pct .pct {
      font-size: 0.4em;
      position: absolute;
      top: 0;
      right: -0.3em;
      opacity: 0.6;
      color: var(--fg);
      transform: rotate(-15deg);
      pointer-events: none;
    }

    .manifesto-grid {
      justify-content: center;
      text-align: center;
    }

    #manifesto .reveal {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
  </style>

  <!-- MANIFESTO SECTION -->
  <section id="manifesto" style="text-align: center; overflow: hidden;">
    <div class="reveal">
      <div class="manifesto-badge">KINETIC NEURAL ENGINE</div>
      <h1 class="manifesto-title" style="margin: 0 auto 40px auto; padding: 0 10px;">
        <span
          style="color: var(--accent-green); display: inline-flex; align-items: center; justify-content: center; transform-origin: center;">
          <div class="merged-pct" style="font-size: 1.1em; transform: scale(1.1); margin-right: 0.2em;">
            100<span class="pct"
              style="font-size: 0.35em; color: var(--accent-green); opacity: 1; top: 0.2em; right: -0.4em;">%</span>
          </div>
          <span style="letter-spacing: -0.05em;">VISION</span>
        </span>
        <br>
        <span
          style="color: var(--accent-pink); display: inline-flex; align-items: center; justify-content: center; transform-origin: center;">
          <div class="merged-pct" style="font-size: 1.1em; transform: scale(1.1); margin-right: 0.2em;">
            0<span class="pct"
              style="font-size: 0.35em; color: var(--accent-pink); opacity: 1; top: 0.2em; right: -0.4em;">%</span>
          </div>
          <span style="letter-spacing: -0.05em;">CONTEXT LOSS</span>
        </span>
      </h1>
    </div>

    <div class="manifesto-grid">
      <div class="manifesto-card reveal" style="transition-delay: 0.1s">
        <h3>WHAT?</h3>
        <p>A precision reasoning system transforming concept data into airtight AI architecture with zero detail loss.
        </p>
      </div>
      <div class="manifesto-card reveal" style="transition-delay: 0.2s">
        <h3>HOW?</h3>
        <p>Through active magnetic feedback loops, we extract every technical parameter and business requirement with
          precision.</p>
      </div>
      <div class="manifesto-card reveal" style="transition-delay: 0.3s">
        <h3>WHY?</h3>
        <p>Because static prompts lose context. Our interactive engine ensures your technical blueprint is hard-coded
          into the output.</p>
      </div>
    </div>

    <div class="reveal" style="transition-delay: 0.5s">
      <a href="#view-1" class="magnetic-wrap scroll-to-engine"
        style="margin-top: 100px; display: inline-flex; align-items: center; gap: 20px; font-weight: 800; font-family: Syne; color: white; text-decoration: none; font-size: 1.5rem;">
        INITIALIZE KINETIC ENGINE ➜
      </a>
    </div>
  </section>

  <!-- NEURAL ENGINE -->
  <main id="engine">
    <!-- STEP 1: VISION -->
    <div id="view-1" class="step-view poster-container active">
      <div class="zine-left">
        <h1 class="hero-title"
          style="text-align: center; width: 100%; margin: 0 auto 40px auto; font-size: clamp(2rem, 10vw, 5.5rem);">
          <span class="highlight"
            style="display: block; white-space: nowrap; transform-origin: center; color: var(--accent-yellow);">INITIALIZE</span>
          <span style="display: block; white-space: nowrap; transform-origin: center; opacity: 0.8;">NEURAL</span>
          <span
            style="display: block; white-space: nowrap; transform-origin: center; color: var(--accent-green);">VISION</span>
        </h1>
        <p style="font-weight: 700; opacity: 0.5; max-width: 350px;">
          Inject your concept vision. Minimum 30 characters required to stabilize the reasoning vector.
        </p>
        <div class="reveal">
          <button class="action-button magnetic-wrap" id="btn-next-1" disabled>
            ACTIVATE ENGINE ➜
          </button>
        </div>
      </div>
      <div class="zine-right">
        <div class="input-zine">
          <textarea id="vision-input" placeholder="Enter vision data..."></textarea>
        </div>
      </div>
    </div>

    <!-- STEP 2: REFINEMENT -->
    <div id="view-2" class="step-view poster-container">
      <div class="zine-left">
        <h1 class="hero-title">
          <span class="highlight">SYNCING</span>
          CONTEXT DATA
        </h1>
        <p style="font-weight: 700; opacity: 0.5; max-width: 350px;">
          Input additional parameters to reach 100% fidelity. Detailed data ensures zero loss in synthesis.
        </p>
      </div>
      <div class="zine-right">
        <div id="questions-container">
          <!-- Dynamic Content -->
        </div>
        <button class="action-button magnetic-wrap" id="btn-generate"
          style="background: var(--accent-yellow); color: #000; box-shadow: 10px 10px 0px var(--accent-green);">
          SYNTHESIZE ALL ➜
        </button>
      </div>
    </div>

    <!-- STEP 3: OUTPUT -->
    <div id="view-3" class="step-view poster-container" style="grid-template-columns: 1fr;">
      <div class="zine-header">
        <h1 class="hero-title" style="margin-bottom: 20px;">
          <span class="highlight">SYNTHESIS</span>
          COMPLETE
        </h1>
        <button class="action-button magnetic-wrap" onclick="copyText('master')"
          style="background: var(--accent-yellow); color: #000; font-size: 14px; padding: 12px 24px; box-shadow: 5px 5px 0px var(--fg); margin-bottom: 40px; margin-top: 0;">
          COPY MASTER PROMPT ➜
        </button>
      </div>

      <div class="master-prompt" id="master-prompt-display"></div>

      <div class="platform-grid" id="platform-grid">
        <!-- Dynamic Content -->
      </div>

      <div style="margin-top: 100px; display: flex; justify-content: center;">
        <button class="action-button magnetic-wrap" onclick="location.reload()"
          style="background: var(--accent-pink); color: #fff;">
          RESET ENGINE ➜
        </button>
      </div>
    </div>
  </main>

  <!-- LOADER -->
  <div id="loader">
    <div class="loader-text" id="loader-main">SYNTHESIZING</div>
    <div style="font-weight: 800; color: var(--accent-green); margin-top: 20px;" id="loader-sub">ALIGNING VECTORS</div>
  </div>

  <script>
    const API = '/analyze.php';
    let state = { vision: '', questions: [], answers: {}, results: null };

    // --- CUSTOM KINETIC CURSOR ---
    const cursor = document.getElementById('cursor');
    const follower = document.getElementById('cursor-follower');

    document.addEventListener('mousemove', (e) => {
      cursor.style.transform = `translate(${e.clientX - 10}px, ${e.clientY - 10}px)`;
      follower.style.transform = `translate(${e.clientX - 20}px, ${e.clientY - 20}px)`;
    });

    document.querySelectorAll('button, a, textarea').forEach(el => {
      el.addEventListener('mouseenter', () => {
        follower.style.transform = `translate(${cursor.offsetLeft - 10}px, ${cursor.offsetTop - 10}px) scale(2)`;
        follower.style.background = 'rgba(255,255,255,0.1)';
      });
      el.addEventListener('mouseleave', () => {
        follower.style.transform = `translate(${cursor.offsetLeft}px, ${cursor.offsetTop}px) scale(1)`;
        follower.style.background = 'transparent';
      });
    });

    // --- MAGNETIC HOVER SYSTEM ---
    const magneticElements = document.querySelectorAll('.magnetic-wrap');
    magneticElements.forEach(el => {
      el.addEventListener('mousemove', (e) => {
        const rect = el.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        el.style.transform = `translate(${x * 0.3}px, ${y * 0.3}px)`;
      });
      el.addEventListener('mouseleave', () => {
        el.style.transform = `translate(0px, 0px)`;
      });
    });

    // --- ENGINE LOGIC ---
    const visionInput = document.getElementById('vision-input');
    const btnNext1 = document.getElementById('btn-next-1');
    const loader = document.getElementById('loader');
    const loaderSub = document.getElementById('loader-sub');

    visionInput.addEventListener('input', () => {
      btnNext1.disabled = visionInput.value.length < 30;
    });

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) e.target.classList.add('visible');
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

    function transitionTo(step) {
      const current = document.querySelector('.step-view.active');
      current.style.opacity = '0';
      current.style.transform = 'translateY(-40px)';

      setTimeout(() => {
        current.classList.remove('active');
        const next = document.getElementById(`view-${step}`);
        next.classList.add('active');
        next.scrollIntoView({ behavior: 'smooth' });
      }, 600);
    }

    btnNext1.addEventListener('click', async () => {
      state.vision = visionInput.value.trim();
      showLoader('MAPPING NEURAL VECTORS');

      try {
        const res = await fetch(API, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ mode: 'clarify', text: state.vision })
        });
        const data = await res.json();
        if (data.error) throw new Error(data.error);

        state.questions = data.clarification_questions;
        renderQuestions();
        transitionTo(2);
      } catch (err) {
        alert('ERROR: ' + err.message);
      } finally {
        hideLoader();
      }
    });

    document.getElementById('btn-generate').addEventListener('click', async () => {
      const inputs = document.querySelectorAll('.answer-area');
      inputs.forEach(el => state.answers[el.dataset.q] = el.value);

      showLoader('FIDELITY_SYNTHESIS');

      try {
        const res = await fetch(API, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ mode: 'generate', text: state.vision, answers: state.answers })
        });
        const data = await res.json();
        if (data.error) throw new Error(data.error);

        state.results = data;
        renderResults();
        transitionTo(3);
      } catch (err) {
        alert('FAILED: ' + err.message);
      } finally {
        hideLoader();
      }
    });

    function copyText(id) {
      let content = '';
      if (id === 'master') {
        content = document.getElementById('master-prompt-display').textContent;
      } else {
        const poster = document.getElementById(`poster-${id}`);
        content = poster.querySelector('pre').textContent;
      }
      navigator.clipboard.writeText(content);
      const btn = event.target;
      const original = btn.textContent;
      btn.textContent = 'COPIED! ✓';
      btn.style.background = 'var(--accent-green)';
      setTimeout(() => {
        btn.textContent = original;
        btn.style.background = id === 'master' ? 'var(--accent-yellow)' : 'var(--fg)';
      }, 2000);
    }

    function renderQuestions() {
      const container = document.getElementById('questions-container');
      container.innerHTML = state.questions.map((q, i) => `
                <div class="question-zine reveal" style="transition-delay: ${i * 0.1}s">
                    <div style="font-weight: 900; color: var(--accent-pink); margin-bottom: 10px; font-size: 11px;">SYNC_PARAM_${i + 1}</div>
                    <p style="font-weight: 700; font-size: 1.5rem; margin-bottom: 20px;">${typeof q === 'object' ? (q.question || q.text || JSON.stringify(q)) : q}</p>
                    <textarea class="answer-area" data-q="${q}" placeholder="Locked context..." style="min-height: 100px; font-size: 18px; border: none; background: #111; padding: 20px;"></textarea>
                </div>
            `).join('');

      setTimeout(() => {
        document.querySelectorAll('#questions-container .reveal').forEach(el => observer.observe(el));
      }, 100);
    }

    function renderResults() {
      const r = state.results;
      document.getElementById('master-prompt-display').textContent = r.master_prompt;

      const grid = document.getElementById('platform-grid');
      grid.innerHTML = Object.entries(r.platform_prompts).map(([plat, text], i) => `
                <div class="platform-poster reveal" style="transition-delay: ${i * 0.2}s">
                    <h2 class="platform-title">${plat}</h2>
                    <p style="font-size: 1.1rem; font-weight: 500; opacity: 0.8; line-height: 1.4;">${text}</p>
                    <button class="platform-copy" onclick="copyText('${plat}')">COPY SYNCED ${plat.toUpperCase()}</button>
                </div>
            `).join('');

      setTimeout(() => {
        document.querySelectorAll('#platform-grid .reveal').forEach(el => observer.observe(el));
      }, 100);
    }

    function copyText(key) {
      const text = key === 'master' ? state.results.master_prompt : state.results.platform_prompts[key];
      navigator.clipboard.writeText(text);
      const btn = event.target;
      const original = btn.textContent;
      btn.textContent = 'SYNC_COPIED';
      btn.style.background = 'var(--accent-green)';
      btn.style.color = '#000';
      setTimeout(() => {
        btn.textContent = original;
        btn.style.background = '';
        btn.style.color = '';
      }, 1500);
    }

    function showLoader(txt) {
      loaderSub.textContent = txt;
      loader.style.display = 'flex';
    }

    function hideLoader() {
      loader.style.display = 'none';
    }

  </script>
</body>

</html>